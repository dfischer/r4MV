| El Capitan Beto - PHReda 5/2007
|------------------------
^reda4.txt
^gui.txt
^sprites.txt

#nave $4 $C44BF645 $C6BB8FE6 $A35E9256 $F3D283B7 $3AB41E7 $4C3338F7 $4CCFCF47 $6D0FDEF6
 $7407DA96 $74040616 $6D7FFBB6 $4D1C06C6 $44108C37 $3A87EC7 $EEF13CF7 $AD1D3CF7 $CA604E06
 $58B84 $CAAFF3D5 $CE3F8426 $ABB29E86 $F2CE9E87 $35B77 $41874B37 $4AABDF87 $701BEDC6
 $4AABF3D6 $44B47347 $FF806DB7 $F7610E37 $B4D52497 $D1484B26 $4 $1E7BA845 $1E7BCF47
 $283BCF47 $3333CF47 $3333A847 $33338147 $283B8147 $1E7B8147 $1E7BA847 $FC5BA365 $FC5BCF47
 $753CF47 $1383CF47 $1383A367 $13837C67 $7537C67 $FC5B7C67 $FC5BA367 $DF1BA845 $DF1BD427
 $EA13D427 $F50BD427 $F50BA847 $F50B7C67 $EA137C67 $DF1B7C67 $DF1BA847 $FFFF4 $20A3A5B5
 $20A3C547 $2883C547 $3067C547 $3067A5B7 $30678627 $28838627 $20A38627 $20A3A5B7 $FEEFA445
 $FEEFC6B7 $83FC6B7 $11EBC6B7 $11EBA447 $11EB81E7 $83F81E7 $FEEF81E7 $FEEFA447 $E243A5C5
 $E243C997 $EA27C997 $F207C997 $F207A5C7 $F20781E7 $EA2781E7 $E24381E7 $E243A5C7 0
#navef $4 $4E47EE15 $4CFF09A6 $E18A7516 $EA12F8B6 $AD1EDB76 $E5337786 $AAAFCA66 $EA102226
 $AF8CDB66 $F3D0BE26 $E7A17296 $5030D506 $FF00004 $4217F335 $3E3F1E36 $F162AAB6 $F50B0286
 $D6931606 $F29B72A6 $D55BC586 $FC5BFB26 $DF1883A6 $9C079E6 $F3C6 $4214B3A6 $FFFF004
 $349FF335 $368B4226 $FECAE056 $5C72B06 $F02B2E66 $5237576 $F02BB206 $F67E666 $FD904E06
 $201454B6 $1298ABF6 $372C8A96 0
#dibdisp $4 $A49404E5 $A4946667 $1386667 $5DDC6667 $5DDC04E7 $5DDFA847 $13BA847 $A497A847
 $A49404E7 $FF004 $B94C0005 $B94C3F67 $3A83F67 $4E043F67 $4E040007 $4E07C587 $3ABC587
 $B94FC587 $B94C0007 0
#alien1 $4 $B6DD7C55 $9C0E6677 $FC5A6677 $6C7E6B57 $5F158617 $44451AD6 $2E518FD6 $1C090C36
 $7518136 $F8B10756 $E3F97296 $CCD0F8A6 $FF00FF4 $BBBD15F5 $B94E9257 $FB229737 $5A36AAB7
 $568D3337 $3F60C306 $2D193336 $1998B466 $8891AD6 $F508B466 $E2C115F6 $CF40AAA6 $DCAB5085
 $DCAB94C7 $EB4B94C7 $FB2394C7 $FB235087 $FB230C47 $EB4B0C47 $DCAB0C47 $DCAB5087 $EA34BA5
 $EA38FE7 $1D438FE7 $2D1B8FE7 $2D1B4BA7 $2D1B0C47 $1D430C47 $EA30C47 $EA34BA7 $FFFFFF4
 $E7A35565 $E7A36DC7 $EC836DC7 $F29B6DC7 $F29B5567 $F29B3D07 $EC833D07 $E7A33D07 $E7A35567
 $15F35565 $15F372A7 $1C0B72A7 $222372A7 $22235567 $22233D07 $1C0B3D07 $15F33D07 $15F35567
 0
#alien2 $4 $EA97DA05 $E90FC637 $ECDFBA07 $C542F6F6 $BA0B0F27 $AFEAE637 $AA82B4D7 $B7268637
 $C5A267C7 $CDA28F57 $D542AAC7 $CE76D637 $F47F93F6 $F78B8637 $FCDF8AC7 $59EAF56 $FBA2A7D7
 $FBD66BA7 $422967 $154E3207 $28CE44F7 $233E8387 $1ADAC447 $12F2BB87 $8AB90E6 $D9F9887
 $110BA947 $39E35B06 $38B70C47 $48E2F4E7 $5C3AD197 $62E33BF7 $68AF8EA7 $535FAAC7 $43DBB817
 $3D339037 $13B7D576 $1233EDC7 $DFFF6E7 $335499F6 $3A0876B7 $45089787 $5224BBA7 $46C10087
 $3C6D39C7 $2CED1277 $2054FF77 $2AC0C247 $5FC1566 $53C2197 $10824A7 $F5A10F46 $F91FC7
 $FF255A47 $F69DA5D7 $E4558D77 $CB5972A7 $D3E12237 $D9D8E3E7 $E788F0D7 $F6C419F6 $F19C1057
 $EF240017 $C2346DC6 $C358A197 $B7E8C4A7 $A85CE387 $9C849A17 $91704EC7 $A1481607 $B48FF0F7
 $BB5833E7 $1237F4 $EE4BE105 $F2B7B926 $C5B6E726 $BE4B01A7 $B36EE3F7 $AD56B117 $B8FE8D07
 $C28A7287 $CB469477 $D2B2B777 $CA7AD847 $F3D3A766 $FEEBA2F6 $9FAA646 $FAFA99C7 $FF3A6D37
 $1963517 $12D63BE7 $22FA43E7 $20567E37 $1D6AB447 $F82AAB7 $58BA766 $FA3B5D6 $3D375CD6
 $3A931B17 $4D1F03C7 $59D6F3D7 $5E333427 $64B78627 $53379A47 $489FA3D7 $3ECF7DA7 $10B3D166
 $947F576 $33ACA996 $37E87AF7 $43509CE7 $4F80C527 $43D4F917 $3DBD28C7 $318D0B27 $2518F1B7
 $2E1CC307 $6A00766 $1646 $F2C116C6 $FF7D3147 $FC4D5887 $F8998C77 $E60980C7 $CFC96647
 $D62527C7 $DB70F1B7 $E8B0FF77 $F9E810F6 $F2B7F736 $BE206506 $C0BC9B97 $B694B3F7 $AAF8DC97
 $9FF09117 $957C4B77 $A3B41F57 $B15BFEE7 $B97C3FD7 0
#roca $4 $A9285555 $AAAD2E57 $D9012497 $FEC9AD17 $1D412497 $47ED2497 $4A5C3F67 $6667F647
 $430F8147 $47EEB957 $752E057 $F29AA0F7 $CB9B0287 $9D471607 $ADB810C7 $5B34004 $B3838585
 $B86091A7 $D46CDFA7 $EA5D3C57 $79D1557 $13CCDAC7 $274CBD87 $4BE07947 $2FD7FF67 $3D3EE977
 $115F1567 $D94ED5F7 $B5F36847 $C6BBA845 $CF43DDE7 $E5339E87 $EDBB5087 $AFB6407 $4E33827
 $F29B1FC7 $C6BB5A47 $DB736007 $DDE08D65 $DF18E527 $F8B0E527 $1FB0AF87 $206099E7 $249079E7
 $1D404E07 $1110AAA7 $F508B467 0
#explo $4 $124B3825 $61867ED6 $346B9E86 $70244446 $20E86666 $4F3D6DB6 $4E0EEE6 $CCD18FD6
 $D690B466 $8FDC8886 $D423FB26 $9116DB76 $E66B6DC6 $F1624936 $FF00004 $B6DC5CA5 $EB4BF646
 $BE2F41E6 $EEF3A366 $F77AD1B6 $EA36DC6 $3CF2EA16 $1C0BAD26 $430C04E6 $14B83F66 $2E511116
 $4E0AF86 $E1891FB6 $EA106186 $FFFF004 $F16030C5 $CF4035A6 $F3D3F646 $D9037C66 $F643B206
 $FC5B2986 $9C38626 $25CB3D06 $FDBCA66 $2BE3E7A6 $C302706 $1728B946 $1387EC6 $EDB8DB66
 $FFFFFF4 $F723F6E5 $E7E01F76 $F8B01866 $F6406186 $1D46 $7506666 $6581866 $1823F6E6
 $9A7EAB6 $F7FAAB6 $4D3CD46 $38FE6 $FB33CF46 $EAEFB9F6 0
#estre $7C7C7C4 $A75AE8C5 $FEEBA2F6 $25AE7586 $162BB4B6 $694B4176 $249008D6 $52011746 $150C39A6
 $FA7978C6 $23439A6 $ACE4EAF6 $F727F736 0
#luna $7C7C7C4 $93848885 $B5A568D7 $14B96DB7 $73CD5557 $70242BE7 $7026A0F7 $1D426B57 $6DB541D7
 $94BC8887 $FFFFFF4 $A704A5C5 $ABE4FD87 $FC591FB7 $50752497 $618404E7 $5F16E057 $29729737
 $652D41D7 $A83CAF87 0


#coords )( 2048

:>sprite | nro 'icono -- 
	swap
	dup $3ff and over 10 >> $3ff and pos
	dup 20 >> $3f and -? ( sh + ) dup dim
	26 >> 2* rsprite ;

:>dimpos 
	dup $fff and $3ff and over 12 >> $fff and pos
	dup 24 >> $ff and dup dim ;

:inicielo
	'coords 512 ( 1? )( 1- swap rand swap !+ swap ) 2drop
	;

:drawcielo
	128 alpha
|	34 'seed !
	'coords 40 ( 1? )( 1- >r
		dup @ 
		|rand $0c000c07 and - rand 
		$04000003 -  | and +
		$00000400 +
		over !
		@+ 	'estre >sprite
		r>	) 2drop

	800 150 pos
	200 dup dim 'luna sprite
	255 alpha
	;

:drawalien
	'coords 40 2 << + 10 ( 1? )( 1- >r
		dup @ 
		|rand $0c000c07 and - rand 
		$04000003 -  | and +
		$f00000 or
		over !
		@+ 	'roca >sprite
		r>	) 2drop
	;

#posnave $ff0fc0ff
#posnavef $bf0fc0a0

:subenave
	posnave $4000 - 'posnave !
	posnavef $4000 - 'posnavef ! ;

:bajanave
	posnave $4000 + 'posnave !
	posnavef $4000 + 'posnavef ! ;

:dernave
	posnave $4 + 'posnave !
	posnavef $4 + 'posnavef ! ;

:izqnave
	posnave $4 - 'posnave !
	posnavef $4 - 'posnavef ! ;

#naveacc 0
#disparos 0
#lugdisp )( 1024
#lugdisp> 'lugdisp

:avanzad
	'lugdisp ( lugdisp> <? )(
		dup @ $1 + 
|		dup >dimpos 'dibdisp sprite
		swap !+
		) drop
	;

:disparo
	avanzad 'disparos !
	;

:inidisp
	$ff0fc0ff lugdisp> !+ 'lugdisp> ! 
	;

:play 
	inicielo
	inidisp
	.page
	[ 'subenave 'naveacc ! ; ] <arr>
	[ 'bajanave 'naveacc ! ; ] <aba>
	[ 'dernave 'naveacc ! ; ] <der>
	[ 'izqnave 'naveacc ! ; ] <izq>

	[ 0 'naveacc ! ; ] dup >arr< >aba<
	[ disparo ; ] <esp>
	'exit <esc>
	.show cls 
		drawcielo
		naveacc exec
		posnavef $30000000 xor dup 'posnavef ! 
		>dimpos 'navef sprite
		posnave >dimpos 'nave sprite
		drawalien
|		avanzad 
|		disparos exec
		;

#fade 0

:presenta
	.page
	12 12 .table
	1 9 .at 4 2 .to 
	rojo "SALIR" 'exit dup >esc< .tbtn 
	.> .> .> .> .> .> 
	verde "JUGAR" 'play dup >esp< .tbtn 
	.show cls
		fade 64 >? ( 0 nip )( 1+ ) dup ink 'fade ! 
		3 2 screen ":R4%.Games" print
		16 8 screen blanco
		1 4 at "El Viaje mas quieto del Mundo" print
		8 8 screen 
		rojo 0 1 at "CAPITAN" pcenter print
		verde 0 2 at "BETO" pcenter print ;
	
:  0 paper presenta "main.txt" run  ;
